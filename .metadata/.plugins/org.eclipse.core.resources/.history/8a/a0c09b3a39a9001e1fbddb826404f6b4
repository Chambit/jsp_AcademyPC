<%@page import="java.util.ArrayList"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	//인증이 안된 사람이라면, 다시 인증페이지로
	if( session.getAttribute("authYN") == null ) {
		response.sendRedirect("auth.jsp");
	}
	
	//app에 list가 있다면, 가져옵니다
	ArrayList<String> list = new ArrayList<>();
	if(application.getAttribute("list") != null) {
		list = (ArrayList<String>)application.getAttribute("list");
	}
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

	<!-- 
	checkbox, radio버튼 선택을 못하도록 하는 옵션 disabled
	checkbox, radio버튼 미리 선택하는 옵션 checked
	select박스의 미리 값을 선택하는 옵션 selected
	input태그를 읽기전용 readonly 
	input태그의 값을 반드시 지정 required
	 -->	


	
	<div style="text-align : center;">
		<h3>영화 좌석 예약</h3>
		<h4>예약할 좌석을 체크한 후에예약버튼을 누르세요</h4>
		<hr>
		
		
		<b>좌석배치도</b>
		<br>
		
		<form action="reserve_ok.jsp" method="post" name="reg_form"> 
			&nbsp;&nbsp;&nbsp;
			<% for(char c = 'A'; c <= 'Z'; c++) { %>
				<small><%=c %></small>
				&nbsp;
			<% } %>
			<br>
			
			<% for(int i = 1; i <= 6; i++) { %>

				<%=i %>
				<% for(char c = 'A'; c <= 'Z'; c++) { %>
					<input type="checkbox" name="seat" value="<%=i %>-<%=c %>" <%=list.contains(i+"-"+c) ? "disabled" : "" %> >
				<% } %>
				
				<br>
				
				<% if(i == 3) { %>
					<br>
				<% } %>
				
			<% } %>
			
			<br>
			<input type="button" value="예약하기">
			<input type="reset" value="다시 선택하기">
			
		</form>
		
	</div>
	
	
	
	
		<script>
	function check() {
		//좌석의 체크여부를 확인할 변수 입니다.
		var seat_check;
		//문서의.네임이(seat) 인 태그의 값을 check 변수에 모두 담습니다.
		//자바스크립트는 변수 타입이 유동적 이기때문에 타입에 맞춰서 자동으로 배열로 선언됩니다.
		var check = document.getElementsByName("seat");
		for (var i = 0; i < check.length ; i++) {
			//배열의 길이만큼 회전하면서 체크 되어있는지 확인 합니다.
			//하나라도 체크되어 있다면 seat_check를 true로 변경 하고 탈출 합니다.
			if(check[i].checked == true){
				seat_check = true;
				break;
			}
		}
		//3항 연산식 입니다 seat_check가 true이라면,
		//문서의.reg_form  <== form의 name 입니다.
		//submit() 전송하는 함수입니다.
		
		//false 라면 경고창을 띄웁니다.
		seat_check == true ? document.reg_form.submit() : alert("예약할 좌석을 선택해주세요.");
	
	}

</script>    
	
	
	
	
	
		
</body>
</html>